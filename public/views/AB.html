<!DOCTYPE html>
<html xmlns="https://www.w3.org/1999/xhtml" ng-app="syncApp">
<head>
	<!--SyncFusion CDN Starts-->
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8"  />
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
	<link href="//cdn.syncfusion.com/18.2.0.44/js/web/flat-azure/ej.web.all.min.css" rel="stylesheet" />	  
	<script src="//cdn.syncfusion.com/js/assets/external/jquery-1.11.3.min.js" type="text/javascript"></script>
	<script src="//cdn.syncfusion.com/js/assets/external/jquery.easing.1.3.min.js" type="text/javascript"></script>
	<script src="//cdn.syncfusion.com/js/assets/external/angular.min.js" type="text/javascript"></script>
	<script src="//cdn.syncfusion.com/18.2.0.44/js/web/ej.web.all.min.js" type="text/javascript"></script>    
	<script src="//cdn.syncfusion.com/18.2.0.44/js/common/ej.widget.angular.min.js" type="text/javascript"></script>
	<script src="//cdn.syncfusion.com/js/assets/external/jsrender.min.js"></script>
	<!--SyncFusion CDN Ends-->
	
	<style>
		#search-button {
		  width: 100px;
		  height: 50px;
		}
			
		#search-button svg {
		  width: 25px;
		  height: 25px;
		}
	</style>

</head>
<body ng-controller="diagramCtrl">
	<button class="btn btn-primary" ng-click="NodeAdd();">Add Event</button>&nbsp;
	
	<script src="http://borismoore.github.io/jsrender/jsrender.min.js"></script>
	
	<script id="svgTemplate" type="text/x-jsrender">
		<g>
			<path ng-click='$parent.ShowFormDataModal($event);' fill="none" d="M13.388,9.624h-3.011v-3.01c0-0.208-0.168-0.377-0.376-0.377S9.624,6.405,9.624,6.613v3.01H6.613c-0.208,0-0.376,0.168-0.376,0.376s0.168,0.376,0.376,0.376h3.011v3.01c0,0.208,0.168,0.378,0.376,0.378s0.376-0.17,0.376-0.378v-3.01h3.011c0.207,0,0.377-0.168,0.377-0.376S13.595,9.624,13.388,9.624z M10,1.344c-4.781,0-8.656,3.875-8.656,8.656c0,4.781,3.875,8.656,8.656,8.656c4.781,0,8.656-3.875,8.656-8.656C18.656,5.219,14.781,1.344,10,1.344z M10,17.903c-4.365,0-7.904-3.538-7.904-7.903S5.635,2.096,10,2.096S17.903,5.635,17.903,10S14.365,17.903,10,17.903z"></path>
		</g>
	</script>
	
	<ej-diagram id="diagram" e-height="80vh" e-width="100%" e-nodeCollectionChange="nodeCollectionChange" e-connectorCollectionChange="connectorCollectionChange" e-connectorTargetChange="connectorTargetChange" e-connectorSourceChange="connectorSourceChange" e-textChange="textChange"></ej-diagram>
					
</body>
	<script>
		var syncApp = 	angular.module('syncApp', ["ejangular"], function() {});
		
		//Initializes Diagram
		syncApp.controller('diagramCtrl', function($scope) {
			
			$scope.nodeCounter	=	1;
			
			$scope.NodeAdd	=	function()
			{
				$scope.diagram 					=  	angular.element("#diagram").ejDiagram("instance");
				var ports 						= 	[{name:"port1",offset:{x:0,y: 0.5},shape: "circle"},{name:"port2",offset:{x: 1,y: 0.5},shape: "circle"},{name:"port3",offset:{x:0.5,y:0},shape: "circle"},{name:"port4",offset:{x:0.5,y:1},shape: "circle"}];
				var name						=	"Event"+$scope.nodeCounter;
				var label						=	[{text:name ,offset:{x: 0.5,y: 0.1 }}];
				$scope.IDValue					=	'Event'+$scope.nodeCounter;
				$scope.diagram.model.drawType 	= 	{ 
														type		: 	ej.datavisualization.Diagram.Shapes.Native, 
														name 		:	name,
														templateId	: 	"svgTemplate",
														labels		:	label,
														ports		:	ports,
														value		:	{
																			select 		:	$scope.IDValue
																		}
													};
													
				var tool 						= 	$scope.diagram.tool();
				$scope.diagram.update({ tool: tool | ej.datavisualization.Diagram.Tool.DrawOnce });
				$scope.NodeId					=	name;
				$scope.nodeCounter++;
			}
			
			$scope.ShowFormDataModal	=	function(event){
				console.log("Hello WORLD");
			}
		});
	</script>	
</html>
