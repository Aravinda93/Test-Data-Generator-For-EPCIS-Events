<!DOCTYPE html>
<html xmlns="https://www.w3.org/1999/xhtml" ng-app="syncApp">
<head>
    <title>Essential Studio for JavaScript : DropDownList - Angular</title>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8"  />
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
    <link href="//cdn.syncfusion.com/18.2.0.44/js/web/flat-azure/ej.web.all.min.css" rel="stylesheet" />

	<script src="//cdn.syncfusion.com/js/assets/external/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script src="//cdn.syncfusion.com/js/assets/external/jquery.easing.1.3.min.js" type="text/javascript"></script>
    <script src="//cdn.syncfusion.com/js/assets/external/angular.min.js" type="text/javascript"></script>
    <script src="//cdn.syncfusion.com/18.2.0.44/js/web/ej.web.all.min.js" type="text/javascript"></script>
    <script src="//cdn.syncfusion.com/18.2.0.44/js/common/ej.widget.angular.min.js" type="text/javascript"></script>
  <script src="//cdn.syncfusion.com/js/assets/external/jsrender.min.js"></script>

</head>
<body ng-controller="diagramCtrl">
    <script src="//borismoore.github.io/jsrender/jsrender.min.js"></script>
<!â€”define html element-->
<script id="htmlTemplate" type="text/x-jsrender">
	<div>
        <select ng-model="Dynamic.optionValue" class="form-control">
            <option class="dropdown-item" value="Option 1" selected> Choose Options</option>
            <option class="dropdown-item" ng-repeat="option in options" value="Option 2"> Option 2 </option>
        </select>
        <input type="text" id="text" placeholder="number of objects" onchange="change()" ></input>
    </div>
</script>

  <input type="button" value="Add-Connector" id="add">
  <input type="button" value="Add-HTML-Nodes" id="addNode">
  <input type="button" value="Add-Basic-Nodes" id="addRect">
    <ej-diagram id="diagram" e-height="600px" e-width="100%"  e-nodes="nodes" e-nodeCollectionChange="collectionChange" e-connectorCollectionChange="connectorCollectionChange" e-selectionChange="selectionChange" e-connectorTargetChange="connectorTargetChange" e-connectorSourceChange="connectorSourceChange"></ej-diagram>

    <script type="text/javascript">

      var nodes = [{
                // Unique name for the node
                name: "Start",
                // Position of the node
                offsetX: 300,
                offsetY: 50,
                // Size of the node
                width: 140,
                height: 100,

                // Shape for the node
               type: ej.datavisualization.Diagram.Shapes.Html,

    //Sets id of html template
    templateId: "htmlTemplate",

            },

        ];


        angular.module('syncApp', ['ejangular'])
           .controller('diagramCtrl', function ($scope) {
           $scope.nodes = nodes;
              $scope.collectionChange = "collectionChanged";
              $scope.connectionChange = "connectionChange";
             $scope.selectionChange = "selectionChange";
             $scope.connectorTargetChange = "connectorTargetChange";
             $scope.connectorSourceChange = "connectorSourceChange";
             $scope.connectorCollectionChange = "connectorCollectionChange";

           });

      var node = {};
      function selectionChange(args) {

        if(args.state === 'changing' && args.changeType === 'remove') {
         node =  args.oldItems[0];
        } else if (args.state === 'changed' && args.changeType === 'remove') {
          node.addInfo = document.getElementById("text").value;
        }

      }

      function connectorSourceChange(args) {
        if(args.dragState === "completed" && args.element.sourceNode !== null) {
        }
      }

      function connectorTargetChange(args) {
        if(args.dragState === "completed" && args.element.targetNode !== null) {
        }
      }



      document.getElementById('add').onclick = function() {
        var diagram = $("#diagram").ejDiagram("instance");
        diagram.model.drawType = { type: "connector" };
          var tool = diagram.tool();
          diagram.update({ tool: tool | ej.datavisualization.Diagram.Tool.DrawOnce })

      }
       document.getElementById('addNode').onclick = function() {

          var diagram = $("#diagram").ejDiagram("instance");
          diagram.model.drawType = { type: "html", templateId: "htmlTemplate" };
          var tool = diagram.tool();
          diagram.update({ tool: tool | ej.datavisualization.Diagram.Tool.DrawOnce })
       }

       document.getElementById('addRect').onclick = function() {

          var diagram = $("#diagram").ejDiagram("instance");
          diagram.model.drawType = { type: "basic", shape: "rectangle" };
          var tool = diagram.tool();
          diagram.update({ tool: tool | ej.datavisualization.Diagram.Tool.DrawOnce })
       }

       function change() {
         var x = document.getElementById("text").value;
         var diagram = $("#diagram").ejDiagram("instance");
       }

      function collectionChanged(args) {
        if(args.element.type === "basic") {

        }
      }

      function connectorCollectionChange(args) {
        console.log(args)
      }




    </script>





   <style type="text/css">

    </style>

</body>
</html>
